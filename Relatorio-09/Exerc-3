# 1. Classe MicroondasUnidade (ComposiÃ§Ã£o)
class MicroondasUnidade
  def initialize(potencia)
    @potencia = potencia
  end

  def aquecer_por(segundos)
    puts "ğŸ”† A unidade de micro-ondas aquece por #{segundos} segundos na potÃªncia #{@potencia}."
  end

  def to_s
    "Micro-ondas (PotÃªncia: #{@potencia})"
  end
end

# 2. Classe DMail (AgregaÃ§Ã£o)
class DMail
  attr_reader :conteudo, :hora_envio

  def initialize(conteudo, hora_envio)
    @conteudo = conteudo
    @hora_envio = hora_envio
  end

  def to_s
    "D-Mail: '#{@conteudo}' enviado Ã s #{@hora_envio}"
  end
end

# 3. Classe TelefoneDeMicroondas
class TelefoneDeMicroondas
  def initialize(potencia_unidade)
    # ComposiÃ§Ã£o: o telefone contÃ©m internamente a unidade
    @unidade = MicroondasUnidade.new(potencia_unidade)
    # AgregaÃ§Ã£o: o telefone tem uma coleÃ§Ã£o de D-Mails (que podem existir fora dele)
    @dmails = []
  end

  # 4. MÃ©todo enviar_dmail
  def enviar_dmail
    puts "\nğŸ“¨ Escreva o conteÃºdo do D-Mail:"
    conteudo = gets.chomp

    puts "â° Digite o horÃ¡rio de envio (formato HH:MM):"
    hora_envio = gets.chomp

    # Simula o uso do micro-ondas antes do envio
    @unidade.aquecer_por(30)

    # Cria o D-Mail e adiciona Ã  lista
    dmail = DMail.new(conteudo, hora_envio)
    @dmails << dmail

    puts "âœ… D-Mail enviado com sucesso!"
  end

  # 5. MÃ©todo listar_dmails
  def listar_dmails(horario_corte)
    puts "\nğŸ•’ Listando D-Mails enviados apÃ³s #{horario_corte}...\n"
    filtrados = @dmails.select { |dmail| dmail.hora_envio > horario_corte }

    if filtrados.empty?
      puts "Nenhum D-Mail encontrado apÃ³s #{horario_corte}."
    else
      filtrados.each { |dmail| puts dmail }
    end

    filtrados
  end
end

# --- Programa Principal ---
puts "ğŸ“ Inicializando Telefone de Micro-ondas..."
telefone = TelefoneDeMicroondas.new(800)

loop do
  puts "\n--- MENU ---"
  puts "1. Enviar novo D-Mail"
  puts "2. Listar D-Mails apÃ³s um horÃ¡rio"
  puts "3. Sair"
  print "Escolha: "
  opcao = gets.chomp

  case opcao
  when "1"
    telefone.enviar_dmail
  when "2"
    print "Digite o horÃ¡rio de corte (HH:MM): "
    corte = gets.chomp
    telefone.listar_dmails(corte)
  when "3"
    puts "Encerrando o programa. ğŸ‘‹"
    break
  else
    puts "OpÃ§Ã£o invÃ¡lida!"
  end
end
